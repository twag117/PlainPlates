{% extends "base.html" %}
{% block title %}Edit Recipe{% endblock %}

{% block content %}
<section class="max-w-2xl mx-auto px-4 py-12">
    <h1 class="text-3xl font-bold mb-6 text-center">Edit Your Recipe</h1>

    {% if error %}
        <div class="mb-4 p-3 rounded bg-red-100 text-red-800 border border-red-300 text-sm">
        {{ error }}
        </div>
    {% endif %}


    <form method="post" action="/recipes/{{ recipe.slug }}/edit" class="space-y-6">

        <div>
            <label for="title" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
            <input type="text" name="title" id="title" value="{{ recipe.title }}"
                class="w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500">
        </div>

        <div>
            <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
            <textarea name="description" id="description" rows="3"
                class="w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500">{{ recipe.description }}</textarea>
        </div>

        <div>
            <label for="ingredients" class="block text-sm font-medium text-gray-700 mb-1">Ingredients</label>
            <textarea name="ingredients" id="ingredients" rows="6"
                class="w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500">{{ recipe.ingredients }}</textarea>
        </div>

        <div>
            <label for="instructions" class="block text-sm font-medium text-gray-700 mb-1">Instructions</label>
            <textarea name="instructions" id="instructions" rows="6"
                class="w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500">{{ recipe.instructions }}</textarea>
        </div>

        <div>
            <label for="notes" class="block text-sm font-medium text-gray-700 mb-1">Notes (optional)</label>
            <textarea name="notes" id="notes" rows="3"
                class="w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500">{{ recipe.notes }}</textarea>
        </div>

        <div class="grid grid-cols-3 gap-4">
            <div>
                <label for="prep_time" class="block text-sm font-medium text-gray-700 mb-1">Prep Time (min)</label>
                <input type="number" name="prep_time" id="prep_time" value="{{ recipe.prep_time }}"
                    class="w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500">
            </div>
            <div>
                <label for="cook_time" class="block text-sm font-medium text-gray-700 mb-1">Cook Time (min)</label>
                <input type="number" name="cook_time" id="cook_time" value="{{ recipe.cook_time }}"
                    class="w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500">
            </div>
            <div>
                <label for="servings" class="block text-sm font-medium text-gray-700 mb-1">Servings</label>
                <input type="number" name="servings" id="servings" value="{{ recipe.servings }}"
                    class="w-full border rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500">
            </div>
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Categories <span class="text-red-500">*</span></label>
            <div class="flex flex-wrap gap-2">
                {% for category in categories %}
                <label class="inline-flex items-center">
                    <input type="checkbox" name="categories" value="{{ category.id }}"
                        {% if category.id in selected_category_ids %}checked{% endif %}
                        class="form-checkbox text-primary-500">
                    <span class="ml-2 text-sm text-gray-700">{{ category.name }}</span>
                </label>
                {% endfor %}
            </div>
        </div>


        <div class="text-center">
            <button type="submit"
                class="bg-primary-500 hover:bg-primary-600 text-white px-6 py-2 rounded-md">
                Save Changes
            </button>
        </div>

    </form>
</section>
{% endblock %}
